{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saiku\\\\OneDrive\\\\Desktop\\\\odin\\\\Bookstore\\\\online_bookstore\\\\src\\\\components\\\\auth\\\\Register.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport toastr from 'toastr';\nimport validator from 'validator';\nimport Input from './../common/Input.jsx';\nimport './Login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n    this.validate = (username, email, password) => {\n      let errors = {};\n      let formIsValid = true;\n      if (!validator.isEmail(email)) {\n        formIsValid = true;\n        errors[\"email\"] = 'Please provide a correct email address.';\n      }\n      if (password.trim().length < 4) {\n        formIsValid = true;\n        errors[\"password\"] = 'Password must have at least 4 characters.';\n      }\n      if (username.trim().length === 0) {\n        formIsValid = true;\n        errors[\"username\"] = 'Please provide your name.';\n      }\n      if (password !== this.state.confirm) {\n        formIsValid = true;\n        errors[\"confirm\"] = 'Register failed.Passwords do not match';\n      }\n      this.setState({\n        errors: errors\n      });\n      return formIsValid;\n    };\n    this.onChange = e => {\n      const state = this.state;\n      state[e.target.name] = e.target.value;\n      this.setState(state);\n    };\n    this.onSubmit = e => {\n      e.preventDefault();\n      const {\n        username,\n        email,\n        password\n      } = this.state;\n      this.setState({\n        submitting: true\n      });\n      if (!this.validate(username, email, password)) {\n        this.setState({\n          submitting: false\n        });\n        toastr.error('Check the form for errors.');\n        return;\n      }\n      this.setState({\n        errors: {}\n      });\n      axios.post('/api/auth/register', {\n        username,\n        email,\n        password\n      }).then(result => {\n        this.setState({\n          message: '',\n          submitting: false\n        });\n        toastr.success('Register successful!');\n        this.props.history.push(\"/login\");\n      }).catch(error => {\n        if (error.response.status === 401) {\n          toastr.error('Register failed!Check the form for errors!');\n          this.setState({\n            message: error.response.data.message\n          });\n          this.setState({\n            submitting: false\n          });\n        }\n      });\n    };\n    this.state = {\n      username: '',\n      email: '',\n      password: '',\n      confirm: '',\n      message: '',\n      errors: {},\n      submitting: false\n    };\n  }\n  render() {\n    const {\n      username,\n      email,\n      password,\n      confirm,\n      message,\n      errors\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form-signin\",\n        onSubmit: this.onSubmit,\n        children: [message !== '' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-warning alert-dismissible fade show\",\n          role: \"alert\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), \" \", message, /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"close\",\n            \"data-dismiss\": \"alert\",\n            \"aria-label\": \"Close\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              \"aria-hidden\": \"true\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"form-signin-heading\",\n          children: \"Please Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"username\",\n          type: \"text\",\n          value: username,\n          placeholder: \"Username\",\n          onChange: this.onChange,\n          label: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"error mb-2\",\n          children: errors[\"username\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"email\",\n          type: \"email\",\n          value: email,\n          placeholder: \"Email address\",\n          onChange: this.onChange,\n          label: \"Email address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"error mb-2\",\n          children: errors[\"email\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"password\",\n          type: \"password\",\n          value: password,\n          placeholder: \"Password\",\n          onChange: this.onChange,\n          label: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"error mb-2\",\n          children: errors[\"password\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"confirm\",\n          type: \"password\",\n          value: confirm,\n          placeholder: \"Confirm Password\",\n          onChange: this.onChange,\n          label: \"Confirm Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"error mb-2\",\n          children: errors[\"confirm\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-lg btn-primary btn-block\",\n          type: \"submit\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Register;","map":{"version":3,"names":["React","Component","axios","toastr","validator","Input","jsxDEV","_jsxDEV","Register","constructor","props","validate","username","email","password","errors","formIsValid","isEmail","trim","length","state","confirm","setState","onChange","e","target","name","value","onSubmit","preventDefault","submitting","error","post","then","result","message","success","history","push","catch","response","status","data","render","className","children","role","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","label"],"sources":["C:/Users/saiku/OneDrive/Desktop/odin/Bookstore/online_bookstore/src/components/auth/Register.js"],"sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport toastr from 'toastr';\nimport validator from 'validator';\nimport Input from './../common/Input.jsx';\nimport './Login.css';\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: '',\n      email: '',\n      password: '',\n      confirm: '',\n      message: '',\n      errors:{},\n      submitting: false,\n    };\n  }\n\n  validate = (username, email, password) => {\n    let errors = {};\n    let formIsValid = true;\n  \n    if (!validator.isEmail(email)) {\n      formIsValid = true;\n      errors[\"email\"] = 'Please provide a correct email address.';\n    }\n  \n    if (password.trim().length < 4) {\n      formIsValid = true;\n      errors[\"password\"] = 'Password must have at least 4 characters.';\n    }\n  \n    if (username.trim().length === 0) {\n      formIsValid = true;\n      errors[\"username\"] = 'Please provide your name.';\n    }\n\n    if (password !== this.state.confirm) {\n      formIsValid = true;\n      errors[\"confirm\"] = 'Register failed.Passwords do not match';\n    }\n  \n    this.setState({errors: errors})\n    \n    return formIsValid;\n  }\n\n  onChange = (e) => {\n    const state = this.state\n    state[e.target.name] = e.target.value;\n    this.setState(state);\n  }\n\n  onSubmit = (e) => {\n    e.preventDefault();\n\n    const { username, email, password } = this.state;\n\n    this.setState({submitting: true});  \n\n    if (!this.validate(username, email, password)) {\n      this.setState({submitting: false})\n      toastr.error('Check the form for errors.');\n      return;\n    }\n    this.setState({errors: {}});\n\n    axios.post('/api/auth/register', { username, email, password })\n      .then((result) => {\n        this.setState({ \n          message: '', \n          submitting: false \n        });\n        toastr.success('Register successful!');\n        this.props.history.push(\"/login\")\n      })\n      .catch((error) => {\n        if(error.response.status === 401) {\n          toastr.error('Register failed!Check the form for errors!');\n          this.setState({ message: error.response.data.message });\n          this.setState({submitting: false});\n        }\n      });\n  }\n\n  render() {\n    const { username, email, password, confirm, message, errors } = this.state;\n    return (\n      <div className=\"container\">\n        <form className=\"form-signin\" onSubmit={this.onSubmit}>\n        {message !== '' &&\n            <div className=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\n              <strong>Error</strong> {message}\n              <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n          }\n          <h2 className=\"form-signin-heading\">Please Register</h2>\n          <Input\n            name=\"username\"\n            type=\"text\"\n            value={username}\n            placeholder=\"Username\"\n            onChange={this.onChange}\n            label=\"Username\" />\n            <small className=\"error mb-2\">{errors[\"username\"]}</small>\n          <Input\n            name=\"email\"\n            type=\"email\"\n            value={email}\n            placeholder=\"Email address\"\n            onChange={this.onChange}\n            label=\"Email address\" />\n            <small className=\"error mb-2\">{errors[\"email\"]}</small>\n          <Input\n            name=\"password\"\n            type=\"password\"\n            value={password}\n            placeholder=\"Password\"\n            onChange={this.onChange}\n            label=\"Password\" />\n            <small className=\"error mb-2\">{errors[\"password\"]}</small>\n          <Input\n            name=\"confirm\"\n            type=\"password\"\n            value={confirm}\n            placeholder=\"Confirm Password\"\n            onChange={this.onChange}\n            label=\"Confirm Password\" />\n            <small className=\"error mb-2\">{errors[\"confirm\"]}</small>\n          <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Register</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}