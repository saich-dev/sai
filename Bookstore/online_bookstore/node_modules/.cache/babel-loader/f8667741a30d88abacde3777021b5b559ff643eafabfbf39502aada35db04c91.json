{"ast":null,"code":"import { GlobalState } from \"../utils/GlobalState\";\nimport { history } from \"../utils/history\";\nimport { postRequest } from \"../utils/Ajax\";\nexport function getBookData(url) {\n  return new Promise(function (resolve, reject) {\n    const handler = function () {\n      if (this.readyState !== 4) {\n        return;\n      }\n      if (this.status === 200) {\n        resolve(this.response);\n      } else {\n        reject(this.statusText);\n      }\n    };\n    const client = new XMLHttpRequest();\n    client.open(\"GET\", url, true);\n    client.onreadystatechange = handler;\n    client.responseType = \"json\";\n    client.setRequestHeader(\"Accept\", \"application/json\");\n    client.send();\n  });\n}\nexport function like(bid, isLike) {\n  let data = {};\n  data['token'] = GlobalState.get('token');\n  if (!data['token']) {\n    history.push('/login');\n  }\n  data['bid'] = bid;\n  const handler = data => {\n    console.log(data);\n    if (data.verify === '0') {\n      history.push('/login');\n    }\n  };\n  if (isLike) {\n    postRequest(GlobalState.get('url') + '/likeBook', data, handler);\n  } else {\n    postRequest(GlobalState.get('url') + '/dislikeBook', data, handler);\n  }\n}\nexport function isLiked(bid, callback) {\n  let data = {};\n  data['token'] = GlobalState.get('token');\n  if (!data['token']) {\n    return;\n  }\n  data['bid'] = bid;\n  const handler = data => {\n    callback(data.opt === '1');\n  };\n  postRequest(GlobalState.get('url') + '/getLikedBookOne', data, handler);\n}\nexport function deleteBook(bid, callback) {\n  let data = {};\n  data['token'] = GlobalState.get('token');\n  if (!data['token']) {\n    history.push('/login');\n  }\n  data['bid'] = bid;\n  const handler = data => {\n    if (data.verify === '0') {\n      history.push('/login');\n    } else {\n      callback(bid, data.opt === '1');\n    }\n  };\n  postRequest(GlobalState.get('url') + '/deleteBook', data, handler);\n}\nexport function updateBook(json, callback) {\n  json['token'] = GlobalState.get('token');\n  if (!json['token']) {\n    history.push('/login');\n  }\n  const handler = data => {\n    if (data.verify === '0') {\n      history.push('/login');\n    } else {\n      callback(data.opt === '1');\n    }\n  };\n  postRequest(GlobalState.get('url') + '/updateBook', json, handler);\n}","map":{"version":3,"names":["GlobalState","history","postRequest","getBookData","url","Promise","resolve","reject","handler","readyState","status","response","statusText","client","XMLHttpRequest","open","onreadystatechange","responseType","setRequestHeader","send","like","bid","isLike","data","get","push","console","log","verify","isLiked","callback","opt","deleteBook","updateBook","json"],"sources":["C:/Users/saiku/OneDrive/Desktop/odin/Bookstore/online_bookstore/src/services/bookService.js"],"sourcesContent":["import {GlobalState} from \"../utils/GlobalState\";\nimport {history} from \"../utils/history\";\nimport {postRequest} from \"../utils/Ajax\";\n\nexport function getBookData(url) {\n    return new Promise(function (resolve, reject) {\n        const handler = function () {\n            if (this.readyState !== 4) {\n                return;\n            }\n            if (this.status === 200) {\n                resolve(this.response);\n            } else {\n                reject(this.statusText);\n            }\n        };\n        const client = new XMLHttpRequest();\n        client.open(\"GET\", url, true);\n        client.onreadystatechange = handler;\n        client.responseType = \"json\";\n        client.setRequestHeader(\"Accept\", \"application/json\");\n        client.send();\n    });\n}\n\nexport function like(bid, isLike) {\n    let data = {};\n    data['token'] = GlobalState.get('token');\n    if (!data['token']) {\n        history.push('/login');\n    }\n    data['bid'] = bid;\n    const handler = (data) => {\n        console.log(data);\n        if (data.verify === '0') {\n            history.push('/login');\n        }\n    };\n\n    if (isLike) {\n        postRequest(GlobalState.get('url') + '/likeBook', data, handler);\n    } else {\n        postRequest(GlobalState.get('url') + '/dislikeBook', data, handler);\n    }\n}\n\nexport function isLiked(bid, callback) {\n    let data = {};\n    data['token'] = GlobalState.get('token');\n    if (!data['token']) {\n        return;\n    }\n    data['bid'] = bid;\n    const handler = (data) => {\n        callback(data.opt === '1');\n    };\n\n    postRequest(GlobalState.get('url') + '/getLikedBookOne', data, handler);\n}\n\nexport function deleteBook(bid, callback) {\n    let data = {};\n    data['token'] = GlobalState.get('token');\n    if (!data['token']) {\n        history.push('/login');\n    }\n    data['bid'] = bid;\n    const handler = (data) => {\n        if (data.verify === '0') {\n            history.push('/login');\n        } else {\n            callback(bid, data.opt === '1');\n        }\n    };\n\n    postRequest(GlobalState.get('url') + '/deleteBook', data, handler);\n}\n\nexport function updateBook(json, callback) {\n    json['token'] = GlobalState.get('token');\n    if (!json['token']) {\n        history.push('/login');\n    }\n    const handler = (data) => {\n        if (data.verify === '0') {\n            history.push('/login');\n        } else {\n            callback(data.opt === '1');\n        }\n    };\n\n    postRequest(GlobalState.get('url') + '/updateBook', json, handler);\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}