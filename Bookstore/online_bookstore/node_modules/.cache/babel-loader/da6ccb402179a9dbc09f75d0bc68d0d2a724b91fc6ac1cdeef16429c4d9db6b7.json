{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saiku\\\\OneDrive\\\\Desktop\\\\odin\\\\Bookstore\\\\online_bookstore\\\\src\\\\components\\\\comments\\\\add_comment\\\\AddComment.jsx\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router';\nimport axios from 'axios';\nimport toastr from 'toastr';\nimport './AddComment.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass AddComment extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      author: '',\n      content: '',\n      message: ''\n    };\n  }\n  componentDidMount() {\n    axios.defaults.headers.common['Authorization'] = localStorage.getItem('jwtToken');\n    this.setState({\n      author: localStorage.getItem('name')\n    });\n  }\n  onChange(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n  onSubmit(e) {\n    e.preventDefault();\n    const {\n      author,\n      content\n    } = this.state;\n    if (content.trim().length < 2) {\n      this.setState({\n        message: 'Comment must be more than 2 symbols.'\n      });\n      return;\n    }\n    axios.put(`/api/book/${this.props.id}/comments`, {\n      author,\n      content\n    }).then(result => {\n      toastr.success('Comment is added successfully!');\n      this.props.history.go(0);\n      // this.forceUpdate();\n    }).catch(error => {\n      if (error.response.status === 401) {\n        toastr.error('Check the form for errors.');\n        this.setState({\n          message: error.response.data.message\n        });\n      }\n    });\n  }\n  render() {\n    const {\n      author,\n      content\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"commentForm\",\n      onSubmit: this.onSubmit.bind(this),\n      children: [this.state.message !== '' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-warning alert-dismissible fade show\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this), \" \", this.state.message, /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"close\",\n          \"data-dismiss\": \"alert\",\n          \"aria-label\": \"Close\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            \"aria-hidden\": \"true\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"content\",\n          className: \"sr-only\",\n          children: \"Review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"form-control\",\n          name: \"content\",\n          placeholder: \"Review\",\n          cols: \"80\",\n          rows: \"2\",\n          value: this.state.content,\n          onChange: this.onChange.bind(this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Add Review\",\n        className: \"btn btn-sm btn-secondary review-btn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default _c = withRouter(AddComment);\n// onClick={this.props.update({author, content})}\nvar _c;\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"names":["React","Component","withRouter","axios","toastr","jsxDEV","_jsxDEV","AddComment","constructor","props","state","author","content","message","componentDidMount","defaults","headers","common","localStorage","getItem","setState","onChange","e","target","name","value","onSubmit","preventDefault","trim","length","put","id","then","result","success","history","go","catch","error","response","status","data","render","bind","children","className","role","fileName","_jsxFileName","lineNumber","columnNumber","type","htmlFor","placeholder","cols","rows","_c","$RefreshReg$"],"sources":["C:/Users/saiku/OneDrive/Desktop/odin/Bookstore/online_bookstore/src/components/comments/add_comment/AddComment.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport {withRouter} from 'react-router';\nimport axios from 'axios';\nimport toastr from 'toastr';\nimport './AddComment.css';\n\nclass AddComment extends Component{\n    constructor(props){\n        super(props);\n\n        this.state = {\n            author: '',\n            content: '',\n            message: '',\n        };\n    }\n\n    componentDidMount(){\n        axios.defaults.headers.common['Authorization'] = localStorage.getItem('jwtToken');\n        this.setState({\n            author: localStorage.getItem('name'),\n        });\n    }\n\n    onChange(e){\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    onSubmit(e){\n        e.preventDefault();\n        const {author, content} = this.state;\n\n        if (content.trim().length < 2) {\n            this.setState({ message: 'Comment must be more than 2 symbols.' });\n            return;\n        }\n\n        axios.put(`/api/book/${this.props.id}/comments` , {author, content})\n        .then((result) => {\n            toastr.success('Comment is added successfully!');\n            this.props.history.go(0);\n            // this.forceUpdate();\n        })\n        .catch((error) => {\n            if(error.response.status === 401) {\n                toastr.error('Check the form for errors.');\n                this.setState({ message: error.response.data.message });\n            }\n        });\n    }\n\n    render(){\n        const {author, content} = this.state;\n        return(\n            <form id=\"commentForm\" onSubmit={this.onSubmit.bind(this)}>\n                {this.state.message !== '' &&\n                <div className=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\n                    <strong>Error</strong> {this.state.message}\n                    <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                </div>\n                }\n                <div className=\"form-group\">\n                    <label htmlFor=\"content\" className=\"sr-only\">Review</label>\n                    <textarea className=\"form-control\" name=\"content\" placeholder=\"Review\" cols=\"80\" rows=\"2\" value={this.state.content} onChange={this.onChange.bind(this)}></textarea>\n                </div>\n                <input type=\"submit\"  value=\"Add Review\" className=\"btn btn-sm btn-secondary review-btn\" />\n            </form>\n        );\n    }\n}\nexport default withRouter(AddComment);\n// onClick={this.props.update({author, content})}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}