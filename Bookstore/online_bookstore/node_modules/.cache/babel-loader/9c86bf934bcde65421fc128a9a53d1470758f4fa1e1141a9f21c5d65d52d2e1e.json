{"ast":null,"code":"import axios from 'axios';\nimport { createAsyncThunk, createReducer } from '@testing-library/jest-dom';\nconst initialState = {\n  books: [{\n    id: '1',\n    title: 'The Hunger Games',\n    author: 'Suzanne Collins',\n    category: 'Action'\n  }, {\n    id: '2',\n    title: 'Dune',\n    author: 'Frank Herbert',\n    category: 'Science Fiction'\n  }]\n};\nconst apiurl = 'https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi/apps/wpvYJWQOuKGfWfhfsjZe/books';\nexport const fetchBooks = createAsyncThunk('books/fetchBooks', async () => {\n  const response = await axios.get(apiurl);\n  const {\n    data\n  } = response;\n  const books = Object.entries(data).map(([key, value]) => {\n    const {\n      category,\n      title,\n      author\n    } = value[0];\n    return {\n      id: key,\n      title,\n      author,\n      category\n    };\n  });\n  return books;\n});\nexport const addBook = createAsyncThunk('books/addBook', async (payload, thunkAPI) => {\n  await axios.post(apiurl, payload);\n  return thunkAPI.dispatch(fetchBooks());\n});\nexport const removeBook = createAsyncThunk('books/removeBook', async (payload, thunkAPI) => {\n  await axios.delete(`${apiurl}/${payload}`);\n  return thunkAPI.dispatch(fetchBooks());\n});\nexport const editBook = createAsyncThunk('books/editBook', async (payload, thunkAPI) => {\n  await axios.put(`${apiurl}/${payload.id}`, payload);\n  return thunkAPI.dispatch(fetchBooks());\n});\n// Reducer\n\nconst bookReducer = createReducer(initialState, {\n  [fetchBooks.fulfilled]: (state, action) => {\n    const newState = {\n      ...state,\n      books: action.payload\n    };\n    return newState;\n  }\n});\nexport default bookReducer;","map":{"version":3,"names":["axios","createAsyncThunk","createReducer","initialState","books","id","title","author","category","apiurl","fetchBooks","response","get","data","Object","entries","map","key","value","addBook","payload","thunkAPI","post","dispatch","removeBook","delete","editBook","put","bookReducer","fulfilled","state","action","newState"],"sources":["C:/Users/saiku/OneDrive/Desktop/odin/Bookstore/online_bookstore/src/redux/Api/api.js"],"sourcesContent":["import axios from 'axios';\nimport { createAsyncThunk, createReducer } from '@testing-library/jest-dom';\n\nconst initialState = {\n  books: [\n    {\n      id: '1',\n      title: 'The Hunger Games',\n      author: 'Suzanne Collins',\n      category: 'Action',\n    },\n    {\n      id: '2',\n      title: 'Dune',\n      author: 'Frank Herbert',\n      category: 'Science Fiction',\n    },\n  ],\n};\n\nconst apiurl = 'https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi/apps/wpvYJWQOuKGfWfhfsjZe/books';\n\nexport const fetchBooks = createAsyncThunk('books/fetchBooks', async () => {\n  const response = await axios.get(apiurl);\n  const { data } = response;\n  const books = Object.entries(data).map(([key, value]) => {\n    const { category, title, author } = value[0];\n    return {\n      id: key,\n      title,\n      author,\n      category,\n    };\n  });\n  return books;\n});\n\nexport const addBook = createAsyncThunk(\n  'books/addBook',\n  async (payload, thunkAPI) => {\n    await axios.post(apiurl, payload);\n    return thunkAPI.dispatch(fetchBooks());\n  },\n);\n\nexport const removeBook = createAsyncThunk(\n  'books/removeBook',\n  async (payload, thunkAPI) => {\n    await axios.delete(`${apiurl}/${payload}`);\n    return thunkAPI.dispatch(fetchBooks());\n  },\n);\n\nexport const editBook = createAsyncThunk(\n  'books/editBook',\n  async (payload, thunkAPI) => {\n    await axios.put(`${apiurl}/${payload.id}`, payload);\n    return thunkAPI.dispatch(fetchBooks());\n  },\n);\n// Reducer\n\nconst bookReducer = createReducer(initialState, {\n  [fetchBooks.fulfilled]: (state, action) => {\n    const newState = {\n      ...state,\n      books: action.payload,\n    };\n    return newState;\n  },\n});\n\nexport default bookReducer;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,gBAAgB,EAAEC,aAAa,QAAQ,2BAA2B;AAE3E,MAAMC,YAAY,GAAG;EACnBC,KAAK,EAAE,CACL;IACEC,EAAE,EAAE,GAAG;IACPC,KAAK,EAAE,kBAAkB;IACzBC,MAAM,EAAE,iBAAiB;IACzBC,QAAQ,EAAE;EACZ,CAAC,EACD;IACEH,EAAE,EAAE,GAAG;IACPC,KAAK,EAAE,MAAM;IACbC,MAAM,EAAE,eAAe;IACvBC,QAAQ,EAAE;EACZ,CAAC;AAEL,CAAC;AAED,MAAMC,MAAM,GAAG,yGAAyG;AAExH,OAAO,MAAMC,UAAU,GAAGT,gBAAgB,CAAC,kBAAkB,EAAE,YAAY;EACzE,MAAMU,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAG,CAACH,MAAM,CAAC;EACxC,MAAM;IAAEI;EAAK,CAAC,GAAGF,QAAQ;EACzB,MAAMP,KAAK,GAAGU,MAAM,CAACC,OAAO,CAACF,IAAI,CAAC,CAACG,GAAG,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK;IACvD,MAAM;MAAEV,QAAQ;MAAEF,KAAK;MAAEC;IAAO,CAAC,GAAGW,KAAK,CAAC,CAAC,CAAC;IAC5C,OAAO;MACLb,EAAE,EAAEY,GAAG;MACPX,KAAK;MACLC,MAAM;MACNC;IACF,CAAC;EACH,CAAC,CAAC;EACF,OAAOJ,KAAK;AACd,CAAC,CAAC;AAEF,OAAO,MAAMe,OAAO,GAAGlB,gBAAgB,CACrC,eAAe,EACf,OAAOmB,OAAO,EAAEC,QAAQ,KAAK;EAC3B,MAAMrB,KAAK,CAACsB,IAAI,CAACb,MAAM,EAAEW,OAAO,CAAC;EACjC,OAAOC,QAAQ,CAACE,QAAQ,CAACb,UAAU,CAAC,CAAC,CAAC;AACxC,CACF,CAAC;AAED,OAAO,MAAMc,UAAU,GAAGvB,gBAAgB,CACxC,kBAAkB,EAClB,OAAOmB,OAAO,EAAEC,QAAQ,KAAK;EAC3B,MAAMrB,KAAK,CAACyB,MAAM,CAAC,GAAGhB,MAAM,IAAIW,OAAO,EAAE,CAAC;EAC1C,OAAOC,QAAQ,CAACE,QAAQ,CAACb,UAAU,CAAC,CAAC,CAAC;AACxC,CACF,CAAC;AAED,OAAO,MAAMgB,QAAQ,GAAGzB,gBAAgB,CACtC,gBAAgB,EAChB,OAAOmB,OAAO,EAAEC,QAAQ,KAAK;EAC3B,MAAMrB,KAAK,CAAC2B,GAAG,CAAC,GAAGlB,MAAM,IAAIW,OAAO,CAACf,EAAE,EAAE,EAAEe,OAAO,CAAC;EACnD,OAAOC,QAAQ,CAACE,QAAQ,CAACb,UAAU,CAAC,CAAC,CAAC;AACxC,CACF,CAAC;AACD;;AAEA,MAAMkB,WAAW,GAAG1B,aAAa,CAACC,YAAY,EAAE;EAC9C,CAACO,UAAU,CAACmB,SAAS,GAAG,CAACC,KAAK,EAAEC,MAAM,KAAK;IACzC,MAAMC,QAAQ,GAAG;MACf,GAAGF,KAAK;MACR1B,KAAK,EAAE2B,MAAM,CAACX;IAChB,CAAC;IACD,OAAOY,QAAQ;EACjB;AACF,CAAC,CAAC;AAEF,eAAeJ,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}