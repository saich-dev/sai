{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saiku\\\\OneDrive\\\\Desktop\\\\odin\\\\Bookstore\\\\online_bookstore\\\\src\\\\components\\\\auth\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport toastr from 'toastr';\nimport Input from './../common/Input.jsx';\nimport './Login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.validate = (username, password) => {\n      let errors = {};\n      let formIsValid = true;\n      if (username.trim().length === 0) {\n        formIsValid = false;\n        errors[\"username\"] = 'Please provide your namee';\n      }\n      if (password.trim().length === 0) {\n        formIsValid = false;\n        errors[\"password\"] = 'Please provide your passwordd.';\n      }\n      this.setState({\n        errors: errors\n      });\n      return formIsValid;\n    };\n    this.onChange = e => {\n      const state = this.state;\n      state[e.target.name] = e.target.value;\n      this.setState(state);\n    };\n    this.onSubmit = e => {\n      e.preventDefault();\n      const {\n        username,\n        password\n      } = this.state;\n      this.setState({\n        submitting: true\n      });\n      if (!this.validate(username, password)) {\n        this.setState({\n          submitting: false\n        });\n        toastr.error('Check the form for errors.');\n        return;\n      }\n      this.setState({\n        errors: {}\n      });\n      axios.post('/api/auth/login', {\n        username,\n        password\n      }).then(result => {\n        localStorage.setItem('jwtToken', result.data.token);\n        localStorage.setItem('name', result.data.name);\n        localStorage.setItem('email', result.data.email);\n        localStorage.setItem('role', result.data.role);\n        toastr.success('Login successful!');\n        this.setState({\n          message: '',\n          submitting: false\n        });\n        this.props.history.push('/');\n      }).catch(error => {\n        if (error.response.status === 401) {\n          toastr.error('Login failed!Check the form for errors!');\n          this.setState({\n            submitting: false\n          });\n          this.setState({\n            message: error.response.data.message\n          });\n        }\n      });\n    };\n    this.state = {\n      username: '',\n      password: '',\n      message: '',\n      errors: {},\n      submitting: false\n    };\n  }\n  render() {\n    const {\n      username,\n      password,\n      message,\n      errors\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form-signin\",\n        onSubmit: this.onSubmit,\n        children: [message !== '' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-warning alert-dismissible fade show\",\n          role: \"alert\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Error\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), \" \", message, /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"close\",\n            \"data-dismiss\": \"alert\",\n            \"aria-label\": \"Close\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              \"aria-hidden\": \"true\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"form-signin-heading\",\n          children: \"Please Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"username\",\n          type: \"text\",\n          value: username,\n          placeholder: \"Username\",\n          onChange: this.onChange,\n          label: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"error mb-2\",\n          children: errors[\"username\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"password\",\n          type: \"password\",\n          value: password,\n          placeholder: \"Password\",\n          onChange: this.onChange,\n          label: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"error mb-2\",\n          children: errors[\"password\"]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-lg btn-primary btn-block\",\n          type: \"submit\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Not a member? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            children: \"Register here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Login;","map":{"version":3,"names":["React","Component","Link","axios","toastr","Input","jsxDEV","_jsxDEV","Login","constructor","props","validate","username","password","errors","formIsValid","trim","length","setState","onChange","e","state","target","name","value","onSubmit","preventDefault","submitting","error","post","then","result","localStorage","setItem","data","token","email","role","success","message","history","push","catch","response","status","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","label","to"],"sources":["C:/Users/saiku/OneDrive/Desktop/odin/Bookstore/online_bookstore/src/components/auth/Login.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport toastr from 'toastr';\nimport Input from './../common/Input.jsx';\nimport './Login.css';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: '',\n      password: '',\n      message: '',\n      errors:{},\n      submitting: false,\n    };\n  }\n  \n  validate = (username, password) => {\n    let errors = {};\n    let formIsValid = true;\n  \n    if (username.trim().length === 0) {\n      formIsValid = false;\n      errors[\"username\"] = 'Please provide your namee';\n    }\n  \n    if (password.trim().length === 0) {\n      formIsValid = false;\n      errors[\"password\"] = 'Please provide your passwordd.';\n    }\n  \n    this.setState({errors: errors})\n    \n    return formIsValid;\n  }\n  \n  onChange = (e) => {\n    const state = this.state\n    state[e.target.name] = e.target.value;\n    this.setState(state);\n  }\n\n  onSubmit = (e) => {\n    e.preventDefault();\n    \n    const { username, password } = this.state;\n\n    this.setState({submitting: true});  \n\n    if (!this.validate(username, password)) {\n      this.setState({submitting: false})\n      toastr.error('Check the form for errors.');\n      return;\n    }\n    this.setState({errors: {}});\n\n    axios.post('/api/auth/login', { username, password })\n      .then((result) => {\n        localStorage.setItem('jwtToken', result.data.token);\n        localStorage.setItem('name', result.data.name);\n        localStorage.setItem('email', result.data.email);\n        localStorage.setItem('role', result.data.role);\n        \n        toastr.success('Login successful!');   \n        this.setState({ \n          message: '', \n          submitting: false \n        });\n        this.props.history.push('/')\n      })\n      .catch((error) => {\n        if(error.response.status === 401) {\n          toastr.error('Login failed!Check the form for errors!');\n          this.setState({submitting: false}); \n          this.setState({ message: error.response.data.message });\n        }\n      });\n  }\n\n  render() {\n    const { username, password, message, errors } = this.state;\n    return (\n      <div className=\"container\">\n        <form className=\"form-signin\" onSubmit={this.onSubmit}>\n          {message !== '' &&\n            <div className=\"alert alert-warning alert-dismissible fade show\" role=\"alert\">\n              <strong>Error</strong> {message}\n              <button type=\"button\" className=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n              </button>\n            </div>\n          }\n          <h2 className=\"form-signin-heading\">Please Sign In</h2>\n          <Input\n            name=\"username\"\n            type=\"text\"\n            value={username}\n            placeholder=\"Username\"\n            onChange={this.onChange}\n            label=\"Username\" />\n            <small className=\"error mb-2\">{errors[\"username\"]}</small>\n          <Input\n            name=\"password\"\n            type=\"password\"\n            value={password}\n            placeholder=\"Password\"\n            onChange={this.onChange}\n            label=\"Password\" />\n            <small className=\"error mb-2\">{errors[\"password\"]}</small>\n          <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Login</button>\n          <p>\n            Not a member? <Link to=\"/register\">Register here</Link>\n          </p>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}